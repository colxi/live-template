!function(){"use strict";const e={},t=new WeakSet,r=function(e){var t=e;return"object"==typeof e&&null!==e&&function(){if(Array.isArray(e))return!0;for(;null!==Object.getPrototypeOf(t=Object.getPrototypeOf(t)););return Object.getPrototypeOf(e)===t}()},n=function(e,o,a,i,u,c){let s,l=[];if(t.has(e))s=e;else{let f=Array.isArray(e)?[]:{},d=new Proxy(f,{set:function(e,t,s){let f=e[t],d=e.hasOwnProperty(t)?"update":"add";if(i.ignoreSameValueReassign&&"update"===d&&f===s)return!0;if(r(s)&&(!i.depth||c<i.depth)){let r=n(s,o,a+"."+t,i,!0,c+1);l=l.concat(r.callbacks),e[t]=r.observer}else e[t]=s;return u?u&&i.observeConstruction&&l.push({action:d,keyPath:a+"."+t,object:e,name:t,oldValue:f}):(o({action:d,keyPath:a+"."+t,object:e,name:t,oldValue:f}),l.length&&l.forEach(e=>o(e)),l.splice(0)),!0},deleteProperty(e,t){let r=e[t];return delete e[t],o({action:"delete",keyPath:a+"."+t,object:e,name:t,oldValue:r}),!0},get:function(e,t){return e[t]}});d=Object.assign(d,e),t.add(d),s=d}return u=!1,{observer:s,callbacks:l.splice(0)}},o=function(t={},a=new Function,i={}){if("object"!=typeof i)throw new Error("Third argument (config) must be an object");const u={id:i.id||"OBSERVED-"+Math.floor(Math.random()*Date.now()),observeConstruction:!!i.observeConstruction,depth:Number(i.depth)>0?Number(i.depth):0,ignoreSameValueReassign:!!i.ignoreSameValueReassign};if(arguments.length>1){if(!(this instanceof o))throw new Error("Constructor Observer requires 'new'");if(!r(t))throw new Error("First argument must be an Object or an Array");if("function"!=typeof a)throw new Error("Second argument (callback) must be a function.");let i=n(t,a,u.id,u,!0,0);e[u.id]=i.observer,i.callbacks.forEach(e=>a(e))}else u.id=t;return e[u.id]};o._enumerate_=function(){return e},"undefined"!=typeof module&&module.exports?module.exports=o:window.Observer=o}();